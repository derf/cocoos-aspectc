#ifndef ATTRIBUTES_AH
#define ATTRIBUTES_AH
#include <msp430.h>

extern void illegal_thread_declaration(void);
extern void illegal_isr_function_call(void);

unsigned char ints_enabled(void) {
	return 0;
}

namespace OS {
	attribute task();
	attribute schedulerCall();
	attribute idle();
	attribute tick();
	attribute ISROnly();
};

namespace TaskAPI {
	attribute create();
	attribute kill();
};

aspect ErrorAvoidance {
	advice execution("% blink_taska()") : before() {
		illegal_thread_declaration();
	}
	advice call(OS::ISROnly()) && within(OS::task()) : before() {
		illegal_isr_function_call();
	}
};

#endif
